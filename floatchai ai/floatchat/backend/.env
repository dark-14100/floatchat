# FloatChat Backend - Environment Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# DATABASE
# =============================================================================
# NOTE: Keep at port 5432 until PgBouncer is running (Phase 2).
# After Phase 2, change to port 5433 (PgBouncer).
DATABASE_URL=postgresql+psycopg2://floatchat:floatchat@localhost:5432/floatchat
# Alembic migrations always connect directly to PostgreSQL on port 5432
DATABASE_URL_DIRECT=postgresql+psycopg2://floatchat:floatchat@localhost:5432/floatchat
# Read-only connection for NL Query Engine (Feature 4) â€” won't work until migration 002
READONLY_DATABASE_URL=postgresql+psycopg2://floatchat_readonly:floatchat_readonly@localhost:5432/floatchat
READONLY_DB_PASSWORD=floatchat_readonly

# =============================================================================
# REDIS / CELERY
# =============================================================================
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# =============================================================================
# S3 / MINIO OBJECT STORAGE
# =============================================================================
# For local development with MinIO, set S3_ENDPOINT_URL
# For production AWS S3, leave S3_ENDPOINT_URL empty
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=floatchat-raw-uploads
S3_REGION=us-east-1

# =============================================================================
# LLM (OPENAI)
# =============================================================================
# Leave empty to skip LLM summary generation and use fallback template
OPENAI_API_KEY=
LLM_MODEL=gpt-4o
LLM_TIMEOUT_SECONDS=30

# =============================================================================
# INGESTION SETTINGS
# =============================================================================
MAX_UPLOAD_SIZE_BYTES=2147483648
DB_INSERT_BATCH_SIZE=1000

# =============================================================================
# AUTHENTICATION (JWT)
# =============================================================================
# Generate a secure secret key for production: openssl rand -hex 32
SECRET_KEY=dev-secret-key-change-in-production
ALGORITHM=HS256

# =============================================================================
# MONITORING
# =============================================================================
# Leave empty to disable Sentry error tracking
SENTRY_DSN=

# =============================================================================
# CONNECTION POOL (Feature 2)
# =============================================================================
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=3600

# =============================================================================
# REDIS CACHE (Feature 2)
# =============================================================================
REDIS_CACHE_TTL_SECONDS=300
REDIS_CACHE_MAX_ROWS=10000

# =============================================================================
# FUTURE ENHANCEMENTS (NOT IMPLEMENTED IN V1)
# =============================================================================
# ClamAV virus scanning - deferred to future version
# CLAMAV_HOST=localhost
# CLAMAV_PORT=3310
